version: 2

# =====================================================================
# 初心者コース用：モデル定義とテスト
# =====================================================================
# 1コマ目 Step C で「手動SELECTでNULLチェック」していた作業を
# schema.yml + dbt test で自動化する体験用。
#
# テストは unique と not_null のみ（シンプルに保つ）

models:
  # ----- Staging Layer -----
  - name: stg_events_beginner
    description: "前処理済みイベントログ（初心者コース用・最小限クリーニング）"
    columns:
      - name: EVENT_ID
        description: "イベントID（主キー）"
        tests:
          - unique
          - not_null
      - name: USER_ID
        description: "ユーザーID"
        tests:
          - not_null
      - name: EVENT_DATE
        description: "イベント発生日"
        tests:
          - not_null

  - name: stg_users_beginner
    description: "前処理済みユーザーマスタ（初心者コース用・最小限クリーニング）"
    columns:
      - name: USER_ID
        description: "ユーザーID（主キー）"
        tests:
          - unique
          - not_null

  # ----- Marts Layer -----
  - name: daily_summary_beginner
    description: "日別サマリー（初心者コース用・stagingからJOIN+GROUP BY）"
    columns:
      - name: EVENT_DATE
        description: "イベント発生日"
        tests:
          - not_null
      - name: COUNTRY
        description: "国コード"
        tests:
          - not_null
      - name: EVENT_COUNT
        description: "イベント件数"
        tests:
          - not_null
